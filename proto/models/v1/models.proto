syntax = "proto3";

package models.v1;

message Habit {
  message DisplayOptions {
    optional bool hide_chart = 1;
    optional bool hide_progressbar = 2;
    optional bool hide_description = 3;
  }

  string name = 1;
  string description = 2;
  string sha = 3;

  string color = 4;
  string icon = 5;

  uint32 daily_target = 6;

  // key is date as `YYYY-MM-DD`
  map<string, Completion> completions = 7;

  // defaults to `[{complete: true}]`
  // first two buttons in list are displayed on habit card,
  // other buttons are displayed on habit page
  repeated Completion.ButtonOptions buttons = 8;

  DisplayOptions display_options = 9;
}

message Completion {
  message ButtonOptions {
    oneof kind {
      // increases count by specified amount
      uint32 delta = 1;

      // (0, 100], increases count by specified percentage of `target`
      // for example, `percentage = 50` will increase `count` by `target * 0.5`
      uint32 percentage = 2;

      // sets `count` to `target`
      bool complete = 3;

      // sets `count` to specified value
      uint32 set = 4;
    }
  }

  uint32 count = 1;
  uint32 target = 2;
}
